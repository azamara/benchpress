import { bind, Injector, OpaqueToken } from 'angular2/src/core/di';
import { PromiseWrapper } from 'angular2/src/facade/async';
import { Reporter } from '../reporter';
export class MultiReporter extends Reporter {
    constructor(reporters) {
        super();
        this._reporters = reporters;
    }
    static createBindings(childTokens) {
        return [
            bind(_CHILDREN)
                .toFactory((injector) => childTokens.map(token => injector.get(token)), [Injector]),
            bind(MultiReporter).toFactory(children => new MultiReporter(children), [_CHILDREN])
        ];
    }
    reportMeasureValues(values) {
        return PromiseWrapper.all(this._reporters.map(reporter => reporter.reportMeasureValues(values)));
    }
    reportSample(completeSample, validSample) {
        return PromiseWrapper.all(this._reporters.map(reporter => reporter.reportSample(completeSample, validSample)));
    }
}
var _CHILDREN = new OpaqueToken('MultiReporter.children');
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGlfcmVwb3J0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJiZW5jaHByZXNzL3NyYy9yZXBvcnRlci9tdWx0aV9yZXBvcnRlci50cyJdLCJuYW1lcyI6WyJNdWx0aVJlcG9ydGVyIiwiTXVsdGlSZXBvcnRlci5jb25zdHJ1Y3RvciIsIk11bHRpUmVwb3J0ZXIuY3JlYXRlQmluZGluZ3MiLCJNdWx0aVJlcG9ydGVyLnJlcG9ydE1lYXN1cmVWYWx1ZXMiLCJNdWx0aVJlcG9ydGVyLnJlcG9ydFNhbXBsZSJdLCJtYXBwaW5ncyI6Ik9BQU8sRUFBQyxJQUFJLEVBQXFCLFFBQVEsRUFBRSxXQUFXLEVBQUMsTUFBTSxzQkFBc0I7T0FDNUUsRUFBVSxjQUFjLEVBQUMsTUFBTSwyQkFBMkI7T0FHMUQsRUFBQyxRQUFRLEVBQUMsTUFBTSxhQUFhO0FBRXBDLG1DQUFtQyxRQUFRO0lBWXpDQSxZQUFZQSxTQUFTQTtRQUNuQkMsT0FBT0EsQ0FBQ0E7UUFDUkEsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FBR0EsU0FBU0EsQ0FBQ0E7SUFDOUJBLENBQUNBO0lBZERELE9BQU9BLGNBQWNBLENBQUNBLFdBQWtCQTtRQUN0Q0UsTUFBTUEsQ0FBQ0E7WUFDTEEsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0E7aUJBQ1ZBLFNBQVNBLENBQUNBLENBQUNBLFFBQWtCQSxLQUFLQSxXQUFXQSxDQUFDQSxHQUFHQSxDQUFDQSxLQUFLQSxJQUFJQSxRQUFRQSxDQUFDQSxHQUFHQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxFQUNyRUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7WUFDMUJBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLFNBQVNBLENBQUNBLFFBQVFBLElBQUlBLElBQUlBLGFBQWFBLENBQUNBLFFBQVFBLENBQUNBLEVBQUVBLENBQUNBLFNBQVNBLENBQUNBLENBQUNBO1NBQ3BGQSxDQUFDQTtJQUNKQSxDQUFDQTtJQVNERixtQkFBbUJBLENBQUNBLE1BQXFCQTtRQUN2Q0csTUFBTUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsR0FBR0EsQ0FDckJBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLEdBQUdBLENBQUNBLFFBQVFBLElBQUlBLFFBQVFBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFDN0VBLENBQUNBO0lBRURILFlBQVlBLENBQUNBLGNBQStCQSxFQUFFQSxXQUE0QkE7UUFDeEVJLE1BQU1BLENBQUNBLGNBQWNBLENBQUNBLEdBQUdBLENBQ3JCQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxHQUFHQSxDQUFDQSxRQUFRQSxJQUFJQSxRQUFRQSxDQUFDQSxZQUFZQSxDQUFDQSxjQUFjQSxFQUFFQSxXQUFXQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUMzRkEsQ0FBQ0E7QUFDSEosQ0FBQ0E7QUFFRCxJQUFJLFNBQVMsR0FBRyxJQUFJLFdBQVcsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtiaW5kLCBwcm92aWRlLCBQcm92aWRlciwgSW5qZWN0b3IsIE9wYXF1ZVRva2VufSBmcm9tICdhbmd1bGFyMi9zcmMvY29yZS9kaSc7XG5pbXBvcnQge1Byb21pc2UsIFByb21pc2VXcmFwcGVyfSBmcm9tICdhbmd1bGFyMi9zcmMvZmFjYWRlL2FzeW5jJztcblxuaW1wb3J0IHtNZWFzdXJlVmFsdWVzfSBmcm9tICcuLi9tZWFzdXJlX3ZhbHVlcyc7XG5pbXBvcnQge1JlcG9ydGVyfSBmcm9tICcuLi9yZXBvcnRlcic7XG5cbmV4cG9ydCBjbGFzcyBNdWx0aVJlcG9ydGVyIGV4dGVuZHMgUmVwb3J0ZXIge1xuICBzdGF0aWMgY3JlYXRlQmluZGluZ3MoY2hpbGRUb2tlbnM6IGFueVtdKTogUHJvdmlkZXJbXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIGJpbmQoX0NISUxEUkVOKVxuICAgICAgICAgIC50b0ZhY3RvcnkoKGluamVjdG9yOiBJbmplY3RvcikgPT4gY2hpbGRUb2tlbnMubWFwKHRva2VuID0+IGluamVjdG9yLmdldCh0b2tlbikpLFxuICAgICAgICAgICAgICAgICAgICAgW0luamVjdG9yXSksXG4gICAgICBiaW5kKE11bHRpUmVwb3J0ZXIpLnRvRmFjdG9yeShjaGlsZHJlbiA9PiBuZXcgTXVsdGlSZXBvcnRlcihjaGlsZHJlbiksIFtfQ0hJTERSRU5dKVxuICAgIF07XG4gIH1cblxuICBfcmVwb3J0ZXJzOiBSZXBvcnRlcltdO1xuXG4gIGNvbnN0cnVjdG9yKHJlcG9ydGVycykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fcmVwb3J0ZXJzID0gcmVwb3J0ZXJzO1xuICB9XG5cbiAgcmVwb3J0TWVhc3VyZVZhbHVlcyh2YWx1ZXM6IE1lYXN1cmVWYWx1ZXMpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgcmV0dXJuIFByb21pc2VXcmFwcGVyLmFsbChcbiAgICAgICAgdGhpcy5fcmVwb3J0ZXJzLm1hcChyZXBvcnRlciA9PiByZXBvcnRlci5yZXBvcnRNZWFzdXJlVmFsdWVzKHZhbHVlcykpKTtcbiAgfVxuXG4gIHJlcG9ydFNhbXBsZShjb21wbGV0ZVNhbXBsZTogTWVhc3VyZVZhbHVlc1tdLCB2YWxpZFNhbXBsZTogTWVhc3VyZVZhbHVlc1tdKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHJldHVybiBQcm9taXNlV3JhcHBlci5hbGwoXG4gICAgICAgIHRoaXMuX3JlcG9ydGVycy5tYXAocmVwb3J0ZXIgPT4gcmVwb3J0ZXIucmVwb3J0U2FtcGxlKGNvbXBsZXRlU2FtcGxlLCB2YWxpZFNhbXBsZSkpKTtcbiAgfVxufVxuXG52YXIgX0NISUxEUkVOID0gbmV3IE9wYXF1ZVRva2VuKCdNdWx0aVJlcG9ydGVyLmNoaWxkcmVuJyk7XG4iXX0=